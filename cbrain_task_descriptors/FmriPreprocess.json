{
    "command-line": "niak_cmd.py Niak_fmri_preprocess [FILE_IN] [FOLDER_OUT] [OPT_PSOM_MAX_QUEUED] [OPT_SLICE_TIMING_TYPE_SCANNER] [OPT_SLICE_TIMING_TYPE_ACQUISITION] [OPT_SLICE_TIMING_DELAY_IN_TR] [OPT_RESAMPLE_VOL_VOXEL_SIZE] [OPT_T1_PREPROCESS_NU_CORRECT_ARG] [OPT_TIME_FILTER_HP] [OPT_TIME_FILTER_LP] [OPT_REGRESS_CONFOUNDS_FLAG_GSC] [OPT_REGRESS_CONFOUNDS_FLAG_SCRUBBING] [OPT_REGRESS_CONFOUNDS_THRE_FD] [OPT_SMOOTH_VOL_FWHM] [SUBJECTS] [ANAT_HINT] [FUNC_HINT] [OPT_MOTION_CORRECTION_SUPPRESS_VOL] [EXTRA_ARGS]", 
    "container-image": {
        "image": "simexp/niak-cog:beta", 
        "index": "docker://", 
        "type": "singularity"
    }, 
    "custom": {
        "cbrain:can-submit-new-tasks": true, 
        "cbrain:inherits-from-class": "CbrainTask::PsomPipelineTask", 
        "cbrain:readonly-input-files": true
    }, 
    "description": "fMRI pre-processing pipeline as available in Niak. More information at https://github.com/SIMEXP/niak", 
    "groups": [
        {
            "id": "input_data", 
            "members": [
                "file_in", 
                "subjects", 
                "folder_out_name", 
                "anat_hint", 
                "func_hint"
            ], 
            "name": "Data"
        }, 
        {
            "id": "slice_timing", 
            "members": [
                "opt_slice_timing_type_scanner", 
                "opt_slice_timing_type_acquisition", 
                "opt_slice_timing_delay_in_tr"
            ], 
            "name": "Slice timing"
        }, 
        {
            "id": "time_filter", 
            "members": [
                "opt_time_filter_hp", 
                "opt_time_filter_lp"
            ], 
            "name": "Time filter"
        }, 
        {
            "id": "regress_confounds", 
            "members": [
                "opt_regress_confounds_flag_gsc", 
                "opt_regress_confounds_flag_scrubbing", 
                "opt_regress_confounds_thre_fd"
            ], 
            "name": "Regress confounds"
        }, 
        {
            "id": "psom_params", 
            "members": [
                "psom_max_queued"
            ], 
            "name": "PSOM options"
        }, 
        {
            "id": "other_params", 
            "members": [
                "opt_smooth_vol_fwhm", 
                "opt_resample_vol_voxel_size", 
                "opt_t1_preprocess_nu_correct_arg", 
                "opt_motion_correction_suppress_vol", 
                "extra_args"
            ], 
            "name": "Other options"
        }
    ], 
    "inputs": [
        {
            "command-line-flag": "--file_in", 
            "description": "A directory containing input files. Warning: if the input directory is more than 100GB, please contact the PSOM team before launching the processing.", 
            "id": "file_in", 
            "list": false, 
            "name": "Input files", 
            "optional": false, 
            "type": "File", 
            "value-key": "[FILE_IN]"
        }, 
        {
            "command-line-flag": "--folder_out", 
            "default-value": "results-directory.niak", 
            "description": "The name of the output folder where results will be produced. Be careful, if a folder with the same name alreay exists on the same data provider, it's content will be overwritten. Output folder name must end with '.niak' for CBRAIN to use the correct file type.", 
            "id": "folder_out_name", 
            "list": false, 
            "name": "Output folder name", 
            "optional": false, 
            "type": "String", 
            "value-key": "[FOLDER_OUT]"
        }, 
        {
            "command-line-flag": "--opt-psom-max_queued", 
            "default-value": 12, 
            "description": "Number of workers to use in PSOM. This is the maximum number of computing nodes that the pipeline will use. It should be adjusted depending on the number of subjects to be processed. Use the default value if you don't know how to set this parameter.", 
            "id": "psom_max_queued", 
            "list": false, 
            "maximum": 1200, 
            "minimum": 12, 
            "name": "PSOM max queued", 
            "optional": false, 
            "type": "Number", 
            "value-key": "[OPT_PSOM_MAX_QUEUED]"
        }, 
        {
            "command-line-flag": "--opt-slice_timing-type_scanner", 
            "default-value": "Siemens", 
            "id": "opt_slice_timing_type_scanner", 
            "list": false, 
            "name": "Slice timing type scanner", 
            "optional": false, 
            "type": "String", 
            "value-choices": [
                "Siemens", 
                "Other"
            ], 
            "value-key": "[OPT_SLICE_TIMING_TYPE_SCANNER]"
        }, 
        {
            "command-line-flag": "--anat_hint", 
            "description": "A hint to pick one out of many anatomical scans. For example if the fmri study includes 'sub-XX_T1.nii.gz' and 'sub-XX_T1w.nii.gz' and you need the 'T1', '--func_hint _T1.' would do the trick", 
            "id": "anat_hint", 
            "list": false, 
            "name": "hint to select anatomical scans", 
            "optional": true, 
            "type": "String", 
            "value-key": "[ANAT_HINT]"
        }, 
        {
            "command-line-flag": "--func_hint", 
            "description": "A hint to pick one out of many functional scans. For example if the fmri study includes 'sub-XX_task-rest-inpace_bold.nii.gz' and 'sub-XX_task-rest-again.nii.gz' and you need the 'inpace' flavor '--func_hint inpace' would do the trick.", 
            "id": "func_hint", 
            "list": false, 
            "name": "hint to select functional scans", 
            "optional": true, 
            "type": "String", 
            "value-key": "[FUNC_HINT]"
        }, 
        {
            "command-line-flag": "--subjects", 
            "description": "Subjects to be processed by the pipeline. Examples: (1) \"1,3-8\" will process subjects 1 to 8 except 2. (2) \"1-10-2\" will process subjects 1,3,5,7,9.", 
            "id": "subjects", 
            "list": false, 
            "name": "Subjects to process", 
            "optional": true, 
            "type": "String", 
            "value-key": "[SUBJECTS]"
        }, 
        {
            "command-line-flag": "--opt-slice_timing-type_acquisition", 
            "default-value": "interleaved ascending", 
            "id": "opt_slice_timing_type_acquisition", 
            "list": false, 
            "name": "Slice timing type acquisition", 
            "optional": false, 
            "type": "String", 
            "value-choices": [
                "sequential", 
                "sequential ascending", 
                "sequential descending", 
                "interleaved", 
                "interleaved ascending", 
                "interleaved descending"
            ], 
            "value-key": "[OPT_SLICE_TIMING_TYPE_ACQUISITION]"
        }, 
        {
            "command-line-flag": "--opt-slice_timing-delay_in_tr", 
            "default-value": 0, 
            "id": "opt_slice_timing_delay_in_tr", 
            "list": false, 
            "name": "Slice timing delay in tr", 
            "optional": false, 
            "type": "Number", 
            "value-key": "[OPT_SLICE_TIMING_DELAY_IN_TR]"
        }, 
        {
            "command-line-flag": "--opt-resample_vol-voxel_size", 
            "description": "The voxel size to use in the stereotaxic space.", 
            "id": "opt_resample_vol_voxel_size", 
            "list": false, 
            "name": "Resample vol voxel size", 
            "optional": true, 
            "type": "Number", 
            "value-key": "[OPT_RESAMPLE_VOL_VOXEL_SIZE]"
        }, 
        {
            "command-line-flag": "--opt-t1_preprocess-nu_correct-arg", 
            "default-value": "-distance 75", 
            "description": " Parameter for non-uniformity correction. 200 is a suggested value for 1.5T images, 75 for 3T images.", 
            "id": "opt_t1_preprocess_nu_correct_arg", 
            "list": false, 
            "name": "T1 preprocess nu correct arg", 
            "optional": false, 
            "type": "String", 
            "value-key": "[OPT_T1_PREPROCESS_NU_CORRECT_ARG]"
        }, 
        {
            "command-line-flag": "--opt-time_filter-hp", 
            "default-value": 0.01, 
            "description": "Cut-off frequency for high-pass filtering, or removal of low frequencies (in Hz).", 
            "id": "opt_time_filter_hp", 
            "list": false, 
            "name": "Time filter hp", 
            "optional": false, 
            "type": "Number", 
            "value-key": "[OPT_TIME_FILTER_HP]"
        }, 
        {
            "command-line-flag": "--opt-time_filter-lp", 
            "default-value": "Inf", 
            "description": "Cut-off frequency for low-pass filtering, or removal of high frequencies (in Hz).", 
            "id": "opt_time_filter_lp", 
            "list": false, 
            "name": "Time filter lp", 
            "optional": false, 
            "type": "String", 
            "value-key": "[OPT_TIME_FILTER_LP]"
        }, 
        {
            "command-line-flag": "--opt-regress_confounds-flag_gsc", 
            "default-value": "true", 
            "description": "Global signal regression.", 
            "id": "opt_regress_confounds_flag_gsc", 
            "list": false, 
            "name": "Regress confounds flag gsc", 
            "optional": false, 
            "type": "String", 
            "value-key": "[OPT_REGRESS_CONFOUNDS_FLAG_GSC]"
        }, 
        {
            "command-line-flag": "--opt-regress_confounds-flag_scrubbing", 
            "default-value": "true", 
            "id": "opt_regress_confounds_flag_scrubbing", 
            "list": false, 
            "name": "Regress confounds flag scrubbing.", 
            "optional": false, 
            "type": "String", 
            "value-key": "[OPT_REGRESS_CONFOUNDS_FLAG_SCRUBBING]"
        }, 
        {
            "command-line-flag": "--opt-regress_confounds-thre_fd", 
            "default-value": "0.5", 
            "description": "The threshold on frame displacement for scrubbing", 
            "id": "opt_regress_confounds_thre_fd", 
            "list": false, 
            "name": "Regress confounds thre fd", 
            "optional": false, 
            "type": "Number", 
            "value-key": "[OPT_REGRESS_CONFOUNDS_THRE_FD]"
        }, 
        {
            "command-line-flag": "--opt-smooth_vol-fwhm", 
            "default-value": 6, 
            "description": "Full-width at maximum (FWHM) of the Gaussian blurring kernel, in mm.", 
            "id": "opt_smooth_vol_fwhm", 
            "list": false, 
            "name": "Smooth vol fwhm", 
            "optional": false, 
            "type": "Number", 
            "value-key": "[OPT_SMOOTH_VOL_FWHM]"
        }, 
        {
            "command-line-flag": "--opt-motion_correction-suppress_vol", 
            "default-value": 0, 
            "description": "The number of volumes that are suppressed at the beginning of a time series", 
            "id": "opt_motion_correction_suppress_vol", 
            "integer": true, 
            "list": false, 
            "name": "Motion correction suppress vol", 
            "optional": false, 
            "type": "Number", 
            "value-key": "[OPT_MOTION_CORRECTION_SUPPRESS_VOL]"
        }, 
        {
            "description": "Extra arguments passed to niak_cmd for expert users.", 
            "id": "extra_args", 
            "list": false, 
            "name": "Extra arguments", 
            "optional": true, 
            "type": "String", 
            "value-key": "[EXTRA_ARGS]"
        }
    ], 
    "invocation-schema": {
        "$schema": "http://json-schema.org/draft-04/schema#", 
        "additionalProperties": false, 
        "dependencies": {}, 
        "description": "Input parameters schema for niak_fmri_preprocess.", 
        "properties": {
            "anat_hint": {
                "type": "string"
            }, 
            "extra_args": {
                "type": "string"
            }, 
            "file_in": {
                "type": "string"
            }, 
            "folder_out_name": {
                "type": "string"
            }, 
            "func_hint": {
                "type": "string"
            }, 
            "opt_motion_correction_suppress_vol": {
                "type": "integer"
            }, 
            "opt_regress_confounds_flag_gsc": {
                "type": "string"
            }, 
            "opt_regress_confounds_flag_scrubbing": {
                "type": "string"
            }, 
            "opt_regress_confounds_thre_fd": {
                "type": "number"
            }, 
            "opt_resample_vol_voxel_size": {
                "type": "number"
            }, 
            "opt_slice_timing_delay_in_tr": {
                "type": "number"
            }, 
            "opt_slice_timing_type_acquisition": {
                "enum": [
                    "sequential", 
                    "sequential ascending", 
                    "sequential descending", 
                    "interleaved", 
                    "interleaved ascending", 
                    "interleaved descending"
                ]
            }, 
            "opt_slice_timing_type_scanner": {
                "enum": [
                    "Siemens", 
                    "Other"
                ]
            }, 
            "opt_smooth_vol_fwhm": {
                "type": "number"
            }, 
            "opt_t1_preprocess_nu_correct_arg": {
                "type": "string"
            }, 
            "opt_time_filter_hp": {
                "type": "number"
            }, 
            "opt_time_filter_lp": {
                "type": "string"
            }, 
            "psom_max_queued": {
                "maximum": 1200, 
                "minimum": 12, 
                "type": "number"
            }, 
            "subjects": {
                "type": "string"
            }
        }, 
        "required": [
            "file_in", 
            "folder_out_name", 
            "psom_max_queued", 
            "opt_slice_timing_type_scanner", 
            "opt_slice_timing_type_acquisition", 
            "opt_slice_timing_delay_in_tr", 
            "opt_t1_preprocess_nu_correct_arg", 
            "opt_time_filter_hp", 
            "opt_time_filter_lp", 
            "opt_regress_confounds_flag_gsc", 
            "opt_regress_confounds_flag_scrubbing", 
            "opt_regress_confounds_thre_fd", 
            "opt_smooth_vol_fwhm", 
            "opt_motion_correction_suppress_vol"
        ], 
        "title": "Niak_fmri_preprocess.invocationSchema", 
        "type": "object"
    }, 
    "name": "Niak_fmri_preprocess", 
    "output-files": [
        {
            "description": "A folder containing the output files.", 
            "id": "folder_out", 
            "list": false, 
            "name": "Output folder", 
            "optional": false, 
            "path-template": "[FOLDER_OUT]"
        }
    ], 
    "schema-version": "0.5", 
    "suggested-resources": {
        "walltime-estimate": 10800
    }, 
    "tool-version": "beta"
}
